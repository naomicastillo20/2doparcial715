{% extends 'base.html' %}

{% block content %}
    <div class="login-container">
        <h1>Agregar Factura</h1>
        <form id="data-form" onsubmit="return validateForm()">
            <label for="invoiceNumber">Número de Factura:</label>
            <input type="text" id="invoiceNumber" name="invoiceNumber" required>
            
            <label for="amount">Monto:</label>
            <input type="number" id="amount" name="amount" required>
            
            <label for="fecha">Fecha:</label>
            <input type="date" id="fecha" name="fecha" required><br><br>
            
            <label for="fecha_vencimiento">Fecha de Vencimiento:</label>
            <input type="date" id="fecha_vencimiento" name="fecha_vencimiento" required><br><br>
            
            <label for="condiciones_pago">Condiciones de Pago:</label>
            <input type="text" id="condiciones_pago" name="condiciones_pago" required><br><br>
            
            <label for="paymentMethod">Método de Pago:</label>
            <select id="paymentMethod" name="paymentMethod" required>
                <option value="">Seleccione un método</option>
                <option value="tarjeta">Tarjeta de Crédito</option>
                <option value="efectivo">Efectivo</option>
                <option value="transferencia">Transferencia</option>
                <option value="deposito">Depósito</option>
            </select>

            <label for="archivo">Adjuntar Archivo:</label>
            <input type="file" id="archivo" name="archivo">

            <button type="submit" class="menu-button">Agregar</button>
        </form>
        <a href="/" class="menu-button">Volver al Menú Principal</a>
    </div>

    <script>
        function validateForm() {
            const invoiceNumber = document.getElementById('invoiceNumber').value.trim();
            const amount = parseFloat(document.getElementById('amount').value);
            const dueDate = document.getElementById('fecha_vencimiento').value;
            const paymentMethod = document.getElementById('paymentMethod').value;

            // Validación del número de factura
            if (invoiceNumber === "") {
                alert("El número de factura es obligatorio.");
                return false;
            }

            // Validación del monto
            if (isNaN(amount) || amount < 0) {
                alert("El monto debe ser un número positivo.");
                return false;
            }

            // Validación de la fecha de vencimiento
            if (dueDate === "") {
                alert("La fecha de vencimiento es obligatoria.");
                return false;
            }

            // Validación del método de pago
            if (paymentMethod === "") {
                alert("Seleccione un método de pago.");
                return false;
            }

            // Si todas las validaciones pasan
            return true;
        }
    </script>
{% endblock %}
